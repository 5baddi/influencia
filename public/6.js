(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{"9oMb":function(t,e,a){"use strict";var s={props:{id:{type:String,default:"Upload-file"},label:{type:String,default:"Upload file"},accept:{type:String,default:"*"},multiple:{type:Boolean,default:!1},isList:{type:Boolean,default:!1},isImage:{type:Boolean,default:!1},icon:{type:String,default:null}},methods:{preventFileInput:function(){var t=this.$refs[this.id];"undefined"!==t&&t.click()},fileChanged:function(){var t=this.$refs[this.id];if(t.files[0]){if(-1===this.files.findIndex((function(e){return e.name===t.files[0].name}))){if(this.multiple){var e=this;Array.from(t.files).forEach((function(t){e.files.push(t)}))}else this.files=[t.files[0]];if(this.isImage){var a=this,s=new FileReader;s.onload=function(t){a.$refs.img_src.src=t.target.result},s.readAsDataURL(t.files[0])}}this.$emit("custom",this.files)}},removeFile:function(t){this.files.splice(t,1)},removeImage:function(){this.files=[]}},data:function(){return{files:[],imgSrc:null}}},i=(a("wW8D"),a("KHd+")),r=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"custom-file-upload"},[a("ul",{directives:[{name:"show",rawName:"v-show",value:t.isList,expression:"isList"}]},t._l(t.files,(function(e,s){return a("li",{key:e.name},[t._v(t._s(e.name.split(".").slice(0,-1).join("."))+" "),a("button",{staticClass:"btn-flat btn-flat-danger",attrs:{type:"button"},on:{click:function(e){return t.removeFile(s)}}},[a("i",{staticClass:"fas fa-times"})])])})),0),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.isImage&&1===t.files.length,expression:"isImage && files.length === 1"}],staticClass:"custom-file-preview"},[a("button",{staticClass:"btn-flat btn-flat-danger",attrs:{type:"button"},on:{click:t.removeImage}},[a("i",{staticClass:"fas fa-times"})]),t._v(" "),a("img",{ref:"img_src"})]),t._v(" "),a("button",{staticClass:"btn btn-primary custom-file-input",attrs:{type:"button"},on:{click:function(e){return t.preventFileInput()}}},[a("i",{class:t.icon}),t._v(" "+t._s(t.label))]),t._v(" "),a("input",{ref:t.id,attrs:{id:t.id,type:"file",accept:t.accept,multiple:t.multiple},on:{change:t.fileChanged}})])}),[],!1,null,"d15a8420",null);e.a=r.exports},MFCc:function(t,e,a){"use strict";a.r(e);var s=a("L2JU"),i=a("9oMb"),r=a("x6DR"),n=a.n(r);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function l(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,s)}return a}function c(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}var u={components:{FileInput:i.a,VueTagsInput:n.a},notifications:{createTrackerErrors:{type:"error"},createTrackerSuccess:{type:"success"},showError:{type:"error",title:"Error",message:"Something going wrong! Please try again.."},showSuccess:{type:"success"}},computed:function(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?l(Object(a),!0).forEach((function(e){c(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):l(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}({},Object(s.b)(["AuthenticatedUser","campaigns"])),data:function(){return{user_id:null,campaign_id:-1,platform:"instagram",name:null,type:"post",username:null,story:null,url:"",urls:[],reach:null,impressions:null,interactions:null,back:null,forward:null,next_story:null,exited:null,published_at:null}},methods:{init:function(){this.campaign_id=-1,this.user_id=null,this.platform="instagram",this.name=null,this.type="url",this.username=null,this.story=null,this.url="",this.urls=[],this.reach=null,this.impressions=null,this.interactions=null,this.back=null,this.forward=null,this.next_story=null,this.exited=null,this.published_at=null},handleStoryUpload:function(t){void 0===t&&t.length>0||(this.story=t)},disableAction:function(){if(!this.campaign_id||-1===this.campaign_id||!this.name)return!0;var t=new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i");return("url"!==this.type||!t.test(this.url))&&(!("story"===this.type&&this.story.length>0&&this.username)&&!("post"===this.type&&this.urls.length>0))},saveTracker:function(){var t={name:this.name,type:this.type,campaign_id:this.campaign_id,platform:"url"!==this.type?this.platform:null},e="";"url"===this.type&&(t.url=this.url),"post"===this.type&&this.urls.length>0&&(this.urls.map((function(t,a){e+=t.text+";"})),t.url=e),"story"===this.type&&(t.username=this.username,t.story=this.story,t.reach=this.reach,t.impressions=this.impressions,t.interactions=this.interactions,t.back=this.back,t.forward=this.forward,t.next_story=this.next_story,t.exited=this.exited,t.published_at=this.published_at),this.create(t)},create:function(t){var e=this,a=new FormData;a.append("user_id",this.AuthenticatedUser.id),a.append("campaign_id",t.campaign_id),a.append("name",t.name),a.append("type",t.type),"url"!==t.type&&a.append("platform",t.platform),"story"===t.type?(a.append("username",t.username),Array.from(t.story).forEach((function(t){a.append("story[]",t)}))):a.append("url",t.url),this.$store.dispatch("addNewTracker",a).then((function(t){e.init(),e.createTrackerSuccess({message:"Tracker ".concat(t.content.name," created successfuly!")}),e.$router.push({name:"trackers"})})).catch((function(t){var a=Object.values(t.response.data.errors);"object"===o(a)&&a.length>0?a.forEach((function(t){e.showError({message:t})})):e.showError({message:t.response.data.message})}))}}},p=a("KHd+"),d=Object(p.a)(u,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"p-1"},[a("div",{staticClass:"card"},[t._m(0),t._v(" "),a("div",{staticClass:"card__content"},[a("form",{ref:"trackerForm",attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.saveTracker(e)}}},[a("p",{staticClass:"modal-form__heading"},[t._v("What would you like to track?")]),t._v(" "),a("div",{staticClass:"radio-group"},[a("div",{staticClass:"radio-group__item",class:{active:"post"===t.type}},[a("label",{attrs:{for:"post"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],attrs:{type:"radio",id:"post",value:"post"},domProps:{checked:t._q(t.type,"post")},on:{change:function(e){t.type="post"}}}),t._v(" "),a("span",[t._v("Interactions for a post on a blog or social media")]),t._v(" "),a("p",[t._v("Track the number of interactions for any public post on blogs or social media.")])])]),t._v(" "),a("div",{staticClass:"radio-group__item",class:{active:"story"===t.type}},[a("label",{attrs:{for:"story"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.type,expression:"type"}],attrs:{type:"radio",id:"story",value:"story"},domProps:{checked:t._q(t.type,"story")},on:{change:function(e){t.type="story"}}}),t._v(" "),a("span",[t._v("Interactions for an Instagram or Snapchat story")]),t._v(" "),a("p",[t._v("Specify the metrics for a story and its content in order to include it in the aggregated statistics.")])])])]),t._v(" "),a("div",{staticClass:"forms"},[a("div",{staticClass:"form-url"},[a("div",{staticClass:"control"},[a("label",[t._v("Tracker name")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:"Name"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),a("p",[t._v("The tracker name is private. It's used in the tracker listing. If no name has been given, one will be automatically generated according to what is being tracked.")])])]),t._v(" "),a("div",{staticClass:"form-url"},[a("div",{staticClass:"control"},[a("label",[t._v("Assign to campaign")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.campaign_id,expression:"campaign_id"}],on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.campaign_id=e.target.multiple?a:a[0]}}},[a("option",{attrs:{selected:""},domProps:{value:-1}},[t._v("Select a campaign")]),t._v(" "),t._l(t.campaigns,(function(e){return a("option",{key:e.id,domProps:{value:e.id}},[t._v(t._s(e.name))])}))],2),t._v(" "),a("p",[t._v("Assign tracker to a exists campaign")])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"story"!==t.type,expression:"type !== 'story'"}],staticClass:"form-url"},[a("div",{staticClass:"control"},[a("label",[t._v(t._s("url"===t.type?"Destination URL":"Post URL"))]),t._v(" "),"url"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.url,expression:"url"}],attrs:{type:"text",placeholder:"https://"},domProps:{value:t.url},on:{input:function(e){e.target.composing||(t.url=e.target.value)}}}):t._e(),t._v(" "),"post"===t.type?a("vue-tags-input",{attrs:{placeholder:"Add post URL",tags:t.urls},on:{"tags-changed":function(e){return t.urls=e}},model:{value:t.url,callback:function(e){t.url=e},expression:"url"}}):t._e(),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:"url"===t.type,expression:"type === 'url'"}]},[t._v("We will generate a shortened URL which will redirect to the destination URL and allow us to track the number and location of visits.")]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:"post"===t.type,expression:"type === 'post'"}]},[t._v("You can specify multiple post URLs on blogs or social media, one URL per line. Several trackers will then be created.")])],1)]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"url"!==t.type,expression:"type !== 'url'"}],staticClass:"form-url"},[a("div",{staticClass:"form-control"},[a("p",{staticClass:"modal-form__heading"},[t._v("Which platform was used to post the "+t._s(t.type)+"?")]),t._v(" "),a("label",{staticClass:"instagram-radio",attrs:{for:"instagram"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.platform,expression:"platform"}],attrs:{type:"radio",value:"instagram"},domProps:{checked:"instagram"===t.platform,checked:t._q(t.platform,"instagram")},on:{change:function(e){t.platform="instagram"}}}),t._v(" "),t._m(1)])])]),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:"story"===t.type,expression:"type === 'story'"}],staticClass:"form-url"},[a("div",{staticClass:"control"},[a("label",[t._v("Story sequence")]),t._v(" "),a("FileInput",{attrs:{id:"storyfile",label:"Upload story sequence",accept:"image/jpeg,image/png,image/gif,video/mp4,video/quicktime",isList:!0,icon:"fas fa-plus",multiple:!1},on:{custom:t.handleStoryUpload}}),t._v(" "),a("p",[t._v("If there are multiple images or videos for the story, we recommend creating one tracker per image or video.")])],1),t._v(" "),a("div",{staticClass:"control"},[a("label",[t._v(t._s("instagram"===t.platform?"Instagram":"Snapchat")+" username")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),a("p",[t._v("Influencer username")])]),t._v(" "),a("div",{staticClass:"control"},[a("label",[t._v("Reach")]),t._v(" "),a("vue-numeric",{model:{value:t.reach,callback:function(e){t.reach=e},expression:"reach"}}),t._v(" "),a("p",[t._v("Accounts reached with this story.")])],1),t._v(" "),a("div",{staticClass:"control"},[a("label",[t._v("Impressions")]),t._v(" "),a("vue-numeric",{model:{value:t.impressions,callback:function(e){t.impressions=e},expression:"impressions"}}),t._v(" "),a("p",[t._v("Number of impressions.")])],1),t._v(" "),a("div",{staticClass:"control"},[a("label",[t._v("Interactions")]),t._v(" "),a("vue-numeric",{model:{value:t.interactions,callback:function(e){t.interactions=e},expression:"interactions"}}),t._v(" "),a("p",[t._v("Actions taken from this story.")])],1),t._v(" "),a("div",{staticClass:"control"},[a("label",[t._v("Back")]),t._v(" "),a("vue-numeric",{model:{value:t.back,callback:function(e){t.back=e},expression:"back"}}),t._v(" "),a("p",[t._v("Number of taps users made to see the previous photo or video in this story.")])],1),t._v(" "),a("div",{staticClass:"control"},[a("label",[t._v("Forward")]),t._v(" "),a("vue-numeric",{model:{value:t.forward,callback:function(e){t.forward=e},expression:"forward"}}),t._v(" "),a("p",[t._v("Number of taps users made to see the next photo or video in this story.")])],1),t._v(" "),a("div",{staticClass:"control"},[a("label",[t._v("Next story")]),t._v(" "),a("vue-numeric",{model:{value:t.next_story,callback:function(e){t.next_story=e},expression:"next_story"}}),t._v(" "),a("p",[t._v("Number of taps users made to see the next account's story.")])],1),t._v(" "),a("div",{staticClass:"control"},[a("label",[t._v("Exited")]),t._v(" "),a("vue-numeric",{model:{value:t.exited,callback:function(e){t.exited=e},expression:"exited"}}),t._v(" "),a("p",[t._v("Number of times a user swiped away from this story.")])],1),t._v(" "),a("div",{staticClass:"control"},[a("label",[t._v("Published at")]),t._v(" "),a("datetime",{attrs:{type:"datetime",title:"Story publiction datetime","use12-hour":!1},model:{value:t.published_at,callback:function(e){t.published_at=e},expression:"published_at"}}),t._v(" "),a("p",[t._v("Story publiction datetime.")])],1)])]),t._v(" "),a("div",{staticClass:"modal-form__actions"},[a("button",{staticClass:"btn btn-success",attrs:{disabled:t.disableAction()}},[t._v("Create")]),t._v(" "),a("router-link",{staticClass:"btn btn-danger",attrs:{to:{name:"trackers"}}},[t._v("Cancel")])],1)])])])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("header",[e("h2",[this._v("Add new Tracker")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("span",[e("i",{staticClass:"fab fa-instagram"}),this._v(" Instagram")])}],!1,null,null,null);e.default=d.exports},OiGo:function(t,e,a){var s=a("R6w5");"string"==typeof s&&(s=[[t.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a("aET+")(s,i);s.locals&&(t.exports=s.locals)},R6w5:function(t,e,a){(t.exports=a("I1BE")(!1)).push([t.i,".custom-file-upload[data-v-d15a8420]{width:100%;height:auto;overflow:hidden;margin:1rem 0}.custom-file-upload>input[type=file][data-v-d15a8420]{display:none}.custom-file-upload .btn[data-v-d15a8420]{width:100%;color:#fff;font-size:8pt}.custom-file-upload .btn-primary[data-v-d15a8420]{background-color:#039be5}.custom-file-upload .btn-flat[data-v-d15a8420]{border:none;background-color:unset;cursor:pointer}.custom-file-upload .btn-flat[data-v-d15a8420]:focus,.custom-file-upload .btn-flat[data-v-d15a8420]:hover{opacity:.7}.custom-file-upload .btn-flat-danger[data-v-d15a8420]{color:#f44336}.custom-file-upload ul li[data-v-d15a8420]{font-size:10pt;font-weight:400;padding:12px}.custom-file-upload .btn[data-v-d15a8420]{display:initial!important}.custom-file-preview button[data-v-d15a8420]{position:absolute;top:0;right:0;transform:translate(-50%,50%)}",""])},wW8D:function(t,e,a){"use strict";a("OiGo")}}]);