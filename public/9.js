(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"1j4B":function(e,t,n){var a=n("okWQ");"string"==typeof a&&(a=[[e.i,a,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};n("aET+")(a,s);a.locals&&(e.exports=a.locals)},"6C7a":function(e,t,n){"use strict";n.r(t);var a=n("bjao"),s=n.n(a),r={props:{influencer:{type:Object,default:function(){return{pic_url:{type:String,default:null},name:{type:String,default:null},biography:{type:String,default:null},followers:{type:Number,default:0},posts:{type:Array,default:[]}}}}},methods:{nbr:function(){return new s.a},loadMore:function(){var e=this;this.loadingMore=!0,this.$store.dispatch("fetchInfluencerContent",{uuid:this.influencer.uuid,page:this.page}).then((function(t){void 0!==t.content.data&&(e.influencerContent=e.influencerContent.concat(t.content.data),t.content.to&&t.content.total&&t.content.current_page&&(e.page=t.content.to<t.content.total?t.content.current_page+1:null)),e.loadingMore=!1})).catch((function(t){e.loadingMore=!1}))}},data:function(){return{attrActive:null,page:null,loadingMore:!0,influencerContent:[]}},created:function(){this.loadMore()}},i=(n("C2kX"),n("KHd+")),l=Object(i.a)(r,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.influencer?n("div",{staticClass:"p-1"},[n("div",{staticClass:"card influencer"},[n("div",{staticClass:"influencer-details"},[n("div",{staticClass:"influencer-details-picture"},[n("a",{attrs:{href:"instagram"===e.influencer.platform?"https://instagram.com/"+e.influencer.username:"",title:"View on "+e.influencer.platform,target:"_blank"}},[n("img",{attrs:{src:e.influencer.pic_url,alt:"Avatar"}})])]),e._v(" "),n("div",{staticClass:"influencer-details-name"},[n("h4",[e._v("\n                    "+e._s(e.influencer.name)+"\n                    "),e.influencer.is_verified?n("svg",{staticClass:"svg-inline--fa fa-badge-check fa-w-16",attrs:{title:"Verified account","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"badge-check",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"}},[n("path",{attrs:{fill:"currentColor",d:"M512 256c0-37.7-23.7-69.9-57.1-82.4 14.7-32.4 8.8-71.9-17.9-98.6-26.7-26.7-66.2-32.6-98.6-17.9C325.9 23.7 293.7 0 256 0s-69.9 23.7-82.4 57.1c-32.4-14.7-72-8.8-98.6 17.9-26.7 26.7-32.6 66.2-17.9 98.6C23.7 186.1 0 218.3 0 256s23.7 69.9 57.1 82.4c-14.7 32.4-8.8 72 17.9 98.6 26.6 26.6 66.1 32.7 98.6 17.9 12.5 33.3 44.7 57.1 82.4 57.1s69.9-23.7 82.4-57.1c32.6 14.8 72 8.7 98.6-17.9 26.7-26.7 32.6-66.2 17.9-98.6 33.4-12.5 57.1-44.7 57.1-82.4zm-144.8-44.25L236.16 341.74c-4.31 4.28-11.28 4.25-15.55-.06l-75.72-76.33c-4.28-4.31-4.25-11.28.06-15.56l26.03-25.82c4.31-4.28 11.28-4.25 15.56.06l42.15 42.49 97.2-96.42c4.31-4.28 11.28-4.25 15.55.06l25.82 26.03c4.28 4.32 4.26 11.29-.06 15.56z"}})]):e._e()]),e._v(" "),n("p",[e._v(e._s(e.influencer.biography?e.influencer.biography:" "))]),e._v(" "),n("ul",[e.influencer.website?n("li",[n("a",{attrs:{href:e.influencer.website,target:"_blank"}},[n("i",{staticClass:"fas fa-globe"}),e._v("\n                             External website\n                        ")])]):e._e(),e._v(" "),n("li",[n("i",{staticClass:"fas fa-users"}),e._v(" "),n("span",[e._v(e._s(e.nbr().abbreviate(e.influencer.followers)))])]),e._v(" "),e.influencer.image_sequences>0?n("li",[n("i",{staticClass:"fas fa-image"}),e._v(" "),n("span",[e._v(e._s(e.nbr().abbreviate(e.influencer.image_sequences)))])]):e._e(),e._v(" "),e.influencer.carousel_sequences>0?n("li",[n("i",{staticClass:"fas fa-images"}),e._v(" "),n("span",[e._v(e._s(e.nbr().abbreviate(e.influencer.carousel_sequences)))])]):e._e(),e._v(" "),e.influencer.video_sequences>0?n("li",[n("i",{staticClass:"fas fa-video"}),e._v(" "),n("span",[e._v(e._s(e.nbr().abbreviate(e.influencer.video_sequences)))])]):e._e(),e._v(" "),e.influencer.likes>0?n("li",[n("i",{staticClass:"fas fa-heart"}),e._v(" "),n("span",[e._v(e._s(e.nbr().abbreviate(e.influencer.likes)))])]):e._e(),e._v(" "),e.influencer.comments>0?n("li",[n("i",{staticClass:"fas fa-comments"}),e._v(" "),n("span",[e._v(e._s(e.nbr().abbreviate(e.influencer.comments)))])]):e._e()])]),e._v(" "),n("div",{staticClass:"influencer-details-bar"},[n("span",{class:"influencer-details-bar-"+e.influencer.platform,staticStyle:{width:"100%"}},[n("i",{staticClass:"fab fa-instagram"}),e._v(" "+e._s(e.nbr().abbreviate(e.influencer.followers))+"\n                ")])])])]),e._v(" "),n("div",{staticClass:"influencer-posts"},e._l(e.influencerContent,(function(t){return n("a",{key:t.id,staticClass:"influencer-posts-card",attrs:{href:t.link,target:"_blank"},on:{mouseover:function(n){e.attrActive=t.id},mouseleave:function(t){e.attrActive=null}}},[n("img",{attrs:{src:t.thumbnail_url,loading:"lazy"}}),e._v(" "),"video"===t.type||"sidecar"===t.type?n("i",{class:"influencer-posts-card-type fas fa-"+("sidecar"===t.type?"images":"video")}):e._e(),e._v(" "),n("div",{class:"influencer-posts-card-attr "+(e.attrActive===t.id?" active":"")},[n("i",{staticClass:"fas fa-heart"}),e._v(e._s(e.nbr().abbreviate(t.likes))+"\n              "),n("i",{staticClass:"fas fa-comment"}),e._v(e._s(e.nbr().abbreviate(t.comments))+"\n           ")])])})),0),e._v(" "),e.influencer.medias>0&&0===e.influencerContent.length?n("p",{staticClass:"scraping-alert"},[e._v("Please wait until analyze all media...")]):e._e(),e._v(" "),n("div",{staticClass:"load-more"},[n("button",{directives:[{name:"show",rawName:"v-show",value:!e.loadingMore&&e.page,expression:"!loadingMore && page"}],staticClass:"btn",on:{click:function(t){return e.loadMore()}}},[e._v("Load more")]),e._v(" "),n("svg",{directives:[{name:"show",rawName:"v-show",value:e.loadingMore,expression:"loadingMore"}],staticClass:"svg-inline--fa fa-spinner fa-w-16 fa-spin",attrs:{"data-v-3b43fdf1":"","aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"spinner",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512","data-fa-i2svg":""}},[n("path",{attrs:{fill:"currentColor",d:"M304 48c0 26.51-21.49 48-48 48s-48-21.49-48-48 21.49-48 48-48 48 21.49 48 48zm-48 368c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zm208-208c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48zM96 256c0-26.51-21.49-48-48-48S0 229.49 0 256s21.49 48 48 48 48-21.49 48-48zm12.922 99.078c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.491-48-48-48zm294.156 0c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48c0-26.509-21.49-48-48-48zM108.922 60.922c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.491-48-48-48z"}})])])]):e._e()}),[],!1,null,"b0213614",null).exports,c={data:function(){return{show:!1,platform:"instagram",username:null}},created:function(){var e=this;document.addEventListener("keydown",(function(t){"Escape"==t.key&&e.show&&e.dismiss()}))},methods:{open:function(){this.show=!0},close:function(){this.show=!1,this.platform="instagram",this.username=null},submit:function(){this.$emit("create",{username:this.username,platform:this.platform})},isValidated:function(){return["instagram","youtube"].includes(this.platform)&&void 0!==this.username&&null!==this.username&&this.username.length>=1}}},o=Object(i.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"modal",class:{"show-modal":e.show}},[n("div",{staticClass:"modal-content"},[e._m(0),e._v(" "),n("div",{staticClass:"modal-form"},[n("div",{staticClass:"forms"},[n("div",{staticClass:"form-url"},[n("div",{staticClass:"control"},[n("label",[e._v("Username or ID")]),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.username,expression:"username"}],attrs:{type:"text",placeholder:"Username"},domProps:{value:e.username},on:{input:function(t){t.target.composing||(e.username=t.target.value)}}}),e._v(" "),n("p",[e._v("You can find the Username or ID on the official influencer page, it is different from platform to another one.")])])]),e._v(" "),n("div",{staticClass:"form-url"},[n("div",{staticClass:"form-control"},[n("p",{staticClass:"modal-form__heading"},[e._v("Which platform was used by the influencer?")]),e._v(" "),n("label",{staticClass:"instagram-radio",attrs:{for:"instagram"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.platform,expression:"platform"}],attrs:{type:"radio",value:"instagram"},domProps:{checked:"instagram"===e.platform,checked:e._q(e.platform,"instagram")},on:{change:function(t){e.platform="instagram"}}}),e._v(" "),e._m(1)]),e._v(" "),n("label",{staticClass:"youtube-radio",attrs:{for:"youtube"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.platform,expression:"platform"}],attrs:{type:"radio",value:"youtube"},domProps:{checked:"youtube"===e.platform,checked:e._q(e.platform,"youtube")},on:{change:function(t){e.platform="youtube"}}}),e._v(" "),e._m(2)])])])]),e._v(" "),n("div",{staticClass:"modal-form__actions"},[n("button",{staticClass:"btn btn-success",attrs:{disabled:!e.isValidated()},on:{click:function(t){return t.preventDefault(),e.submit()}}},[e._v("Add")]),e._v(" "),n("button",{staticClass:"btn btn-danger",on:{click:function(t){return t.preventDefault(),e.close()}}},[e._v("Cancel")])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("header",[t("h4",{staticClass:"heading"},[this._v("Add new influencer")])])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("i",{staticClass:"fab fa-instagram"}),this._v(" Instagram")])},function(){var e=this.$createElement,t=this._self._c||e;return t("span",[t("i",{staticClass:"fab fa-youtube"}),this._v(" YouTube")])}],!1,null,null,null).exports,u=n("L2JU");function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v={components:{InfluencerProfile:l,CreateInfluencerModal:o},notifications:{showError:{type:"error",title:"Error",message:"Something going wrong! Please try again.."},showSuccess:{type:"success"}},computed:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},Object(u.b)(["AuthenticatedUser","influencers","influencer"])),watch:{"$route.params.uuid":function(e){void 0!==e?this.fetchInfluencer():this.$store.commit("setInfluencer",{influencer:null})}},methods:{loadInfluencers:function(){void 0!==this.influencers&&null!==this.influencers&&0!==Object.values(this.influencers).length||this.$store.dispatch("fetchInfluencers")},fetchInfluencer:function(){void 0!==this.$route.params.uuid?this.$store.dispatch("fetchInfluencer",this.$route.params.uuid):this.$store.commit("setInfluencer",{influencer:null})},addInfluencer:function(){this.$refs.influencerFormModal.open()},deleteInfluencer:function(e){this.$refs.confirmDeleteInfluencerModal.open("Are sure to delete this influencer?",e)},deleteInfluencerAction:function(e){var t=this;void 0===e.uuid&&this.showError(),this.$store.dispatch("deleteInfluencer",e.uuid).then((function(n){t.$refs.influencersDT.reloadData(),t.showSuccess({message:"Successfully deleted influencer @"+e.username})})).catch((function(e){t.showError({message:e.message})}))},create:function(e){var t=this;this.$store.dispatch("addInfluencer",e).then((function(e){t.$refs.influencerFormModal.close(),t.showSuccess({message:e.message})})).catch((function(e){var n=Object.values(e.response.data.errors);"object"===f(n)&&n.length>0?n.forEach((function(e){t.showError({message:e})})):t.showError({message:e.response.data.message})}))}},mounted:function(){void 0!==this.$route.params.uuid?this.fetchInfluencer():(this.$store.commit("setInfluencer",{influencer:null}),this.loadInfluencers())},data:function(){return{columns:[{field:"pic_url",isAvatar:!0,isImage:!0,sortable:!1},{name:"Full name",field:"name",callback:function(e){var t="";return"instagram"===e.platform?t='<a href="https://instagram.com/'+e.username+'" target="_blank">'+(e.name?e.name:"@"+e.username)+"</a>":"youtube"===e.platform&&(t='<a href="https://www.youtube.com/channel/'+e.account_id+'" target="_blank">'+e.name+"</a>"),t}},{name:"Followers",field:"followers",isNbr:!0},{name:"Media",field:"medias",isNbr:!0},{name:"Platform",field:"platform",callback:function(e){var t="",n="";return"instagram"===e.platform?(t="https://instagram.com/",n='<i class="fab fa-instagram instagram-icon"></i>'):"youtube"===e.platform&&(t="https://youtube.com/",n='<i class="fab fa-youtube youtube-icon"></i>'),'<a href="'+t+'" target="_blank" title="'+e.platform+'" class="icon-link">'+n+"</a>"}},{name:"Engagement rate",field:"engagement_rate",isPercentage:!0},{name:"Analyzed",field:"posts_count",callback:function(e){return(e.posts_count/e.medias*100).toFixed(2)+"%"}},{name:"Last update",field:"updated_at",isTimeAgo:!0}]}}},p=Object(i.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"influencers"},[e.influencer?e._e():n("div",{staticClass:"hero"},[n("div",{staticClass:"hero__intro"},[n("h1",[e._v("Influencers")]),e._v(" "),n("ul",{staticClass:"breadcrumbs"},[n("li",[n("router-link",{attrs:{to:{name:"dashboard"}}},[e._v("Dashboard")])],1),e._v(" "),e._m(0)])]),e._v(" "),n("div",{staticClass:"hero__actions"},[n("button",{staticClass:"btn btn-success",on:{click:function(t){return e.addInfluencer()}}},[e._v("Add new influencer")])])]),e._v(" "),e.influencer?e._e():n("div",{staticClass:"p-1"},[n("header",{staticClass:"cards"},[n("div",{staticClass:"card"},[n("div",{staticClass:"number"},[e._v(e._s(e._f("formatedNbr")(e.influencers.length)))]),e._v(" "),n("p",{staticClass:"description"},[e._v("NUMBER OF INFLUENCERS")])])]),e._v(" "),n("div",{staticClass:"datatable-scroll"},[n("DataTable",{ref:"influencersDT",attrs:{columns:e.columns,nativeData:e.influencers,fetchMethod:"fetchInfluencers",cssClasses:"table-card"},scopedSlots:e._u([{key:"body-row",fn:function(t){return n("td",{},[n("router-link",{staticClass:"icon-link",attrs:{to:{name:"influencers",params:{uuid:t.data.original.uuid}},title:"Influencer details"}},[n("i",{staticClass:"fas fa-eye"})]),e._v(" "),e.$can("delete","influencer")||e.AuthenticatedUser&&e.AuthenticatedUser.is_superadmin?n("button",{staticClass:"btn icon-link",attrs:{disabled:t.data.original.trackers_count>0,title:t.data.original.trackers_count>0?"already associated with a tracker":"Delete influencer"},on:{click:function(n){return e.deleteInfluencer(t.data.original)}}},[n("i",{staticClass:"far fa-trash-alt"})]):e._e()],1)}}],null,!1,630594641)},[n("th",{attrs:{slot:"header"},slot:"header"},[e._v("Actions")])])],1)]),e._v(" "),e.influencer?n("InfluencerProfile",{attrs:{influencer:e.influencer}}):e._e(),e._v(" "),n("CreateInfluencerModal",{ref:"influencerFormModal",on:{create:e.create}}),e._v(" "),n("ConfirmationModal",{ref:"confirmDeleteInfluencerModal",on:{custom:e.deleteInfluencerAction}})],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("li",[t("a",{attrs:{href:"#"}},[this._v("Influencers")])])}],!1,null,null,null);t.default=p.exports},C2kX:function(e,t,n){"use strict";n("1j4B")},okWQ:function(e,t,n){(e.exports=n("I1BE")(!1)).push([e.i,".load-more[data-v-b0213614]{display:flex;justify-content:center;margin:1rem 0}.load-more .btn[data-v-b0213614]{background-color:#039be5;color:#fff}.load-more .btn[data-v-b0213614]:hover,btn[data-v-b0213614]:focus{opacity:.7}.load-more svg[data-v-b0213614]{font-size:22pt;color:#039be5}.scraping-alert[data-v-b0213614]{text-align:center;color:grey;font-weight:700}",""])}}]);